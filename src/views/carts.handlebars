<link rel="stylesheet" href="/css/style.css" />

<div class="cart-container">
  <h1 class="text-center">Carrito de compras</h1>

  {{#if products.length}}
    <div class="container">
      {{#each products}}
        <div class="card mb-3">
          <div class="card-body">
            <h5 class="card-title">Producto: {{this.product.title}}</h5>
            <p class="card-text">Cantidad: {{this.quantity}}</p>
            <p class="card-text">Precio: ${{this.product.totalPrice}}</p>
            <button
              onclick="deleteProduct('{{this.cartId}}', '{{this.product._id}}')"
              class="btn btn-danger"
            >Eliminar</button>
          </div>
        </div>
      {{/each}}
    </div>

    <button onclick="clearCart('{{cartId}}')" class="btn btn-danger">Vaciar
      carrito</button>
    <h3 class="mt-2">Total: ${{totalPurchase}}</h3>
    <form method="post" action="/api/carts/{{cartId}}/purchase">
      <button type="submit" class="btn btn-success">Finalizar compra</button>
    </form>
  {{else}}
    <p class="text-center empty-cart-message">
      <a href="/products">Tu carrito está vacío. ¡Agrega tus productos
        favoritos!</a>
    </p>
  {{/if}}
</div>

<script src="/js/cart.js"></script>