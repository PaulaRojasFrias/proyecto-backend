<h1>Lista de Usuarios</h1>

<table>
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Email</th>
      <th>Rol</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {{#each users}}
      <tr>
        <td>{{this.first_name}} {{this.last_name}}</td>
        <td>{{this.email}}</td>
        <td>
          {{#if (eq this.role 'admin')}}
            Administrador
          {{else}}
            <form action="/api/users/{{this._id}}/role" method="POST">
              <select name="newRole">
                <option value="user" {{#if (eq this.role 'user')}}selected{{/if}}>Usuario</option>
                <option value="premium" {{#if (eq this.role 'premium')}}selected{{/if}}>Premium</option>
                <option value="admin" {{#if (eq this.role 'admin')}}selected{{/if}}>Administrador</option>
              </select>
              <button type="submit">Actualizar Rol</button>
            </form>
          {{/if}}
        </td>
        <td>
          {{#unless (eq this.role 'admin')}}
            <form action="/admin/users/{{this._id}}" method="POST">
              <button type="submit">Eliminar</button>
            </form>
          {{/unless}}
        </td>
      </tr>
    {{/each}}
  </tbody>
</table>
